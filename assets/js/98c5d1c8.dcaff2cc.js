"use strict";(globalThis.webpackChunkhumanoid_robotics_book=globalThis.webpackChunkhumanoid_robotics_book||[]).push([[300],{5680(e,t,n){n.d(t,{xA:()=>d,yg:()=>c});var r=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),m=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=m(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef(function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),f=m(n),c=o,u=f["".concat(l,".").concat(c)]||f[c]||p[c]||a;return n?r.createElement(u,i(i({ref:t},d),{},{components:n})):r.createElement(u,i({ref:t},d))});function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var m=2;m<a;m++)i[m]=n[m];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},7578(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>m});var r=n(8168),o=(n(6540),n(5680));const a={id:"ros2-week5",title:"Week 5: Transforms and URDFs in ROS 2",slug:"/ros2/week5",sidebar_label:"Week 5: Transforms & URDFs",estimated_time:4,week:5,module:"ROS 2 Ecosystem",prerequisites:["ros2-week4"],learning_objectives:["Understand the importance of coordinate frames in robotics.","Use `tf2` to broadcast and listen to coordinate transformations.","Create a Unified Robot Description Format (URDF) file for a simple robot.","Visualize a robot model in RViz2."]},i="Week 5: Transforms and URDFs in ROS 2",s={unversionedId:"ros2/ros2-week5",id:"ros2/ros2-week5",title:"Week 5: Transforms and URDFs in ROS 2",description:"This week, we will tackle two of the most important concepts in ROS 2: coordinate transformations (tf2) and robot descriptions (URDF). These are the tools that allow us to represent and track the state of a robot in a 3D world.",source:"@site/docs/ros2/week5.md",sourceDirName:"ros2",slug:"/ros2/week5",permalink:"/docs/ros2/week5",draft:!1,tags:[],version:"current",frontMatter:{id:"ros2-week5",title:"Week 5: Transforms and URDFs in ROS 2",slug:"/ros2/week5",sidebar_label:"Week 5: Transforms & URDFs",estimated_time:4,week:5,module:"ROS 2 Ecosystem",prerequisites:["ros2-week4"],learning_objectives:["Understand the importance of coordinate frames in robotics.","Use `tf2` to broadcast and listen to coordinate transformations.","Create a Unified Robot Description Format (URDF) file for a simple robot.","Visualize a robot model in RViz2."]},sidebar:"tutorialSidebar",previous:{title:"Week 4: ROS 2 Intro",permalink:"/docs/ros2/week4"},next:{title:"tf2",permalink:"/docs/ros2/tf2"}},l={},m=[{value:"Topics Covered",id:"topics-covered",level:2},{value:"Coordinate Frames",id:"coordinate-frames",level:2},{value:"The <code>tf2</code> Library",id:"the-tf2-library",level:2},{value:"Broadcasting Transforms",id:"broadcasting-transforms",level:3},{value:"Listening for Transforms",id:"listening-for-transforms",level:3},{value:"Unified Robot Description Format (URDF)",id:"unified-robot-description-format-urdf",level:2},{value:"RViz2",id:"rviz2",level:2}],d={toc:m};function p({components:e,...t}){return(0,o.yg)("wrapper",(0,r.A)({},d,t,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"week-5-transforms-and-urdfs-in-ros-2"},"Week 5: Transforms and URDFs in ROS 2"),(0,o.yg)("p",null,"This week, we will tackle two of the most important concepts in ROS 2: coordinate transformations (",(0,o.yg)("inlineCode",{parentName:"p"},"tf2"),") and robot descriptions (URDF). These are the tools that allow us to represent and track the state of a robot in a 3D world."),(0,o.yg)("h2",{id:"topics-covered"},"Topics Covered"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Coordinate Frames:")," Why we need them and how they work."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"The ",(0,o.yg)("inlineCode",{parentName:"strong"},"tf2")," Library:")," Broadcasting and listening to transforms."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Static and Dynamic Transforms:")," Representing fixed and moving parts of a robot."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Unified Robot Description Format (URDF):")," Describing a robot's physical properties."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"RViz2:")," Visualizing robot models and ",(0,o.yg)("inlineCode",{parentName:"li"},"tf2")," frames.")),(0,o.yg)("h2",{id:"coordinate-frames"},"Coordinate Frames"),(0,o.yg)("p",null,"In robotics, we are always dealing with objects in a 3D world. To describe the position and orientation of these objects, we use ",(0,o.yg)("strong",{parentName:"p"},"coordinate frames"),". A coordinate frame is a set of three orthogonal axes (x, y, and z) that define a coordinate system."),(0,o.yg)("p",null,"A robot is a collection of different parts, each with its own coordinate frame. For example, a humanoid robot might have a coordinate frame for its base, another for its torso, one for each arm, and one for each leg. On top of that, you might have a coordinate frame for a camera, a Lidar, and any other sensors on the robot."),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," library in ROS 2 is a tool for keeping track of all these different coordinate frames and the transformations between them."),(0,o.yg)("h2",{id:"the-tf2-library"},"The ",(0,o.yg)("inlineCode",{parentName:"h2"},"tf2")," Library"),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," is a powerful library that lets you keep track of multiple coordinate frames over time. It maintains a tree of coordinate frames and allows you to ask for the transformation between any two frames at any point in time."),(0,o.yg)("h3",{id:"broadcasting-transforms"},"Broadcasting Transforms"),(0,o.yg)("p",null,"A ",(0,o.yg)("strong",{parentName:"p"},"transform")," is a set of instructions that tells you how to get from one coordinate frame to another. It consists of a translation (a 3D vector) and a rotation (a quaternion)."),(0,o.yg)("p",null,"A ",(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," ",(0,o.yg)("strong",{parentName:"p"},"broadcaster")," is a node that publishes transforms. For example, you might have a node that reads the joint angles of a robot arm and publishes the transforms for each link in the arm."),(0,o.yg)("p",null,"Here is a simple example of a ",(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," broadcaster that publishes a static transform between a ",(0,o.yg)("inlineCode",{parentName:"p"},"world")," frame and a ",(0,o.yg)("inlineCode",{parentName:"p"},"robot")," frame:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-python"},"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import TransformStamped\nfrom tf2_ros.static_transform_broadcaster import StaticTransformBroadcaster\n\nclass StaticFramePublisher(Node):\n    \"\"\"\n    Publishes a static transform between the 'world' and 'robot' frames.\n    \"\"\"\n    def __init__(self):\n        super().__init__('static_transform_publisher')\n        self._tf_publisher = StaticTransformBroadcaster(self)\n\n        # Publish a static transform once on startup\n        self.make_transforms()\n\n    def make_transforms(self):\n        t = TransformStamped()\n\n        t.header.stamp = self.get_clock().now().to_msg()\n        t.header.frame_id = 'world'\n        t.child_frame_id = 'robot'\n\n        t.transform.translation.x = 1.0\n        t.transform.translation.y = 2.0\n        t.transform.translation.z = 0.0\n\n        # No rotation in this example\n        t.transform.rotation.x = 0.0\n        t.transform.rotation.y = 0.0\n        t.transform.rotation.z = 0.0\n        t.transform.rotation.w = 1.0\n\n        self._tf_publisher.sendTransform(t)\n\ndef main():\n    rclpy.init()\n    node = StaticFramePublisher()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n")),(0,o.yg)("h3",{id:"listening-for-transforms"},"Listening for Transforms"),(0,o.yg)("p",null,"A ",(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," ",(0,o.yg)("strong",{parentName:"p"},"listener")," is a node that subscribes to the ",(0,o.yg)("inlineCode",{parentName:"p"},"/tf")," topic and can be used to get the transformation between any two coordinate frames."),(0,o.yg)("p",null,"For example, if you have a Lidar on your robot, you might want to transform the Lidar data from the ",(0,o.yg)("inlineCode",{parentName:"p"},"lidar")," frame to the ",(0,o.yg)("inlineCode",{parentName:"p"},"world")," frame to see where the obstacles are in the world."),(0,o.yg)("p",null,"We will see examples of ",(0,o.yg)("inlineCode",{parentName:"p"},"tf2")," listeners in later weeks when we start working with sensor data."),(0,o.yg)("h2",{id:"unified-robot-description-format-urdf"},"Unified Robot Description Format (URDF)"),(0,o.yg)("p",null,"A URDF file is an XML file that describes the physical properties of a robot. It is a tree of ",(0,o.yg)("strong",{parentName:"p"},"links")," and ",(0,o.yg)("strong",{parentName:"p"},"joints"),"."),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"A ",(0,o.yg)("strong",{parentName:"li"},"link")," is a rigid part of the robot, like a a wheel, a leg, or a torso. Each link has a name and can have visual and collision properties."),(0,o.yg)("li",{parentName:"ul"},"A ",(0,o.yg)("strong",{parentName:"li"},"joint")," connects two links and defines how they can move relative to each other. A joint can be ",(0,o.yg)("inlineCode",{parentName:"li"},"revolute")," (for a rotating joint), ",(0,o.yg)("inlineCode",{parentName:"li"},"prismatic")," (for a sliding joint), ",(0,o.yg)("inlineCode",{parentName:"li"},"fixed")," (for a joint that doesn't move), or ",(0,o.yg)("inlineCode",{parentName:"li"},"continuous")," (for a joint that can rotate continuously).")),(0,o.yg)("p",null,"Here is a simple example of a URDF file for a two-wheeled robot:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<robot name="my_robot">\n\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.1" radius="0.2"/>\n      </geometry>\n    </visual>\n  </link>\n\n  <link name="left_wheel">\n    <visual>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n    </visual>\n  </link>\n\n  <joint name="base_to_left_wheel" type="continuous">\n    <parent link="base_link"/>\n    <child link="left_wheel"/>\n    <origin xyz="0 0.25 -0.05"/>\n    <axis xyz="0 1 0"/>\n  </joint>\n\n</robot>\n')),(0,o.yg)("p",null,"This URDF defines a robot with a ",(0,o.yg)("inlineCode",{parentName:"p"},"base_link")," and a ",(0,o.yg)("inlineCode",{parentName:"p"},"left_wheel"),", connected by a ",(0,o.yg)("inlineCode",{parentName:"p"},"continuous")," joint."),(0,o.yg)("h2",{id:"rviz2"},"RViz2"),(0,o.yg)("p",null,"RViz2 is a powerful 3D visualization tool for ROS 2. It allows you to see what your robot is doing and to debug your robotics application."),(0,o.yg)("p",null,"With RViz2, you can:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Visualize your robot model (from a URDF file)."),(0,o.yg)("li",{parentName:"ul"},"Display ",(0,o.yg)("inlineCode",{parentName:"li"},"tf2")," frames to see the relationship between different coordinate frames."),(0,o.yg)("li",{parentName:"ul"},"Visualize sensor data, such as Lidar scans, camera images, and point clouds."),(0,o.yg)("li",{parentName:"ul"},"Display the output of your navigation and manipulation algorithms.")),(0,o.yg)("p",null,"RViz2 is an essential tool for any ROS 2 developer, and we will be using it extensively throughout this course."))}p.isMDXComponent=!0}}]);
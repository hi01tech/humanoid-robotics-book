"use strict";(globalThis.webpackChunkhumanoid_robotics_book=globalThis.webpackChunkhumanoid_robotics_book||[]).push([[474],{9733(e,t,a){a.r(t),a.d(t,{default:()=>y});var s=a(6540),n=a(3779);const r="chatbotContainer_StLs",o="chatTitle_hIBB",l="messageArea_xK9X",c="userMessage_lvhv",u="botMessage_wi26",i="loadingIndicator_YC7w",m="errorContainer_fAdB",h="inputArea_L9fG",p="chatInput_jfEP",d="sourcesContainer_jbTz";var g=a(6347);const b="Humanoid Robotics Assistant";function y(){const[e,t]=(0,s.useState)([]),[a,y]=(0,s.useState)(""),[E,_]=(0,s.useState)(!1),[f,k]=(0,s.useState)(null),v=(0,s.useRef)(null),w=(0,g.zy)();(0,s.useEffect)(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[e]),(0,s.useEffect)(()=>{0===e.length&&t([{type:"bot",text:`Hello! I'm your ${b}. Ask me anything about the textbook!`}])},[w.pathname]);const C=async()=>{if(!a.trim())return;const e={type:"user",text:a};t(t=>[...t,e]),y(""),_(!0),k(null);const s=localStorage.getItem("docusaurus.language")||"en";try{const a=await fetch("http://127.0.0.1:8000/rag/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e.text,top_k:3,target_language:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json(),r={type:"bot",text:n.answer,sources:n.sources};t(e=>[...e,r])}catch(n){k(`Failed to get a response: ${n.message}`),t(e=>[...e,{type:"bot",text:`Sorry, I encountered an error: ${n.message}`}])}finally{_(!1)}};return s.createElement(n.A,{title:"Chat",description:"Chat with the Humanoid Robotics Assistant"},s.createElement("div",{className:r},s.createElement("h1",{className:o},"Chat with ",b),s.createElement("div",{className:l},e.map((e,t)=>s.createElement("div",{key:t,className:"user"===e.type?c:u},(e=>"bot"===e.type&&e.sources&&e.sources.length>0?s.createElement(s.Fragment,null,s.createElement("p",null,e.text),s.createElement("div",{className:d},s.createElement("strong",null,"Sources:"),s.createElement("ul",null,e.sources.map((e,t)=>s.createElement("li",{key:t},e.url?s.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.source.split("/").pop().replace(".md","").replace(/[-_]/g," ")):e.source.split("/").pop().replace(".md","").replace(/[-_]/g," ")))))):s.createElement("p",null,e.text))(e))),s.createElement("div",{ref:v}),E&&s.createElement("div",{className:i},"Thinking..."),f&&s.createElement("div",{className:m},f)),s.createElement("div",{className:h},s.createElement("input",{type:"text",value:a,onChange:e=>y(e.target.value),onKeyPress:e=>"Enter"===e.key&&C(),className:p,placeholder:"Ask me anything about humanoid robotics...",disabled:E}),s.createElement("button",{onClick:C,className:"button button--primary",disabled:E},"Send"))))}}}]);